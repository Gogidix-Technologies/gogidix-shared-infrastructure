# Message Broker Service Environment Configuration Template
# Copy this file to .env and update the values for your environment

# Service Configuration
SERVER_PORT=8089
SPRING_PROFILES_ACTIVE=dev
SERVICE_NAME=message-broker

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SASL_MECHANISM=PLAIN
KAFKA_SASL_USERNAME=kafka_user
KAFKA_SASL_PASSWORD=kafka_password

# Kafka Producer Configuration
KAFKA_PRODUCER_RETRIES=3
KAFKA_PRODUCER_BATCH_SIZE=16384
KAFKA_PRODUCER_LINGER_MS=5
KAFKA_PRODUCER_BUFFER_MEMORY=33554432
KAFKA_PRODUCER_ACKS=all
KAFKA_PRODUCER_COMPRESSION_TYPE=snappy

# Kafka Consumer Configuration
KAFKA_CONSUMER_GROUP_ID=exalt-message-broker
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=false
KAFKA_CONSUMER_MAX_POLL_RECORDS=500
KAFKA_CONSUMER_SESSION_TIMEOUT_MS=30000
KAFKA_CONSUMER_HEARTBEAT_INTERVAL_MS=3000

# Topic Configuration
KAFKA_TOPIC_REPLICATION_FACTOR=3
KAFKA_TOPIC_PARTITIONS=6
KAFKA_TOPIC_RETENTION_MS=604800000
KAFKA_TOPIC_AUTO_CREATE=true

# Schema Registry Configuration
SCHEMA_REGISTRY_ENABLED=true
SCHEMA_REGISTRY_URL=http://localhost:8081
SCHEMA_REGISTRY_USERNAME=registry_user
SCHEMA_REGISTRY_PASSWORD=registry_password

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=message_broker_db
DB_USERNAME=message_broker_user
DB_PASSWORD=secure_password
DB_SSL=false
DB_POOL_SIZE=10

# Redis Configuration (for caching and dead letter handling)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=8
CACHE_TTL_SECONDS=3600

# Security Configuration
JWT_SECRET=your-jwt-secret-key-here
JWT_EXPIRES_IN=24h
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# Message Processing Configuration
MAX_RETRY_ATTEMPTS=3
RETRY_BACKOFF_MS=1000
DEAD_LETTER_QUEUE_ENABLED=true
MESSAGE_TTL_SECONDS=86400
MAX_MESSAGE_SIZE_BYTES=1048576

# Event Store Configuration
EVENT_STORE_ENABLED=true
EVENT_STORE_RETENTION_DAYS=90
EVENT_REPLAY_ENABLED=true

# Monitoring Configuration
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
PROMETHEUS_METRICS_ENABLED=true
JMX_ENABLED=true
JMX_PORT=9999

# Logging Configuration
LOG_LEVEL=INFO
LOG_LEVEL_KAFKA=DEBUG
LOG_LEVEL_MESSAGE_BROKER=DEBUG
LOG_PATTERN_CONSOLE=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
LOG_FILE_ENABLED=true
LOG_FILE_PATH=./logs/message-broker.log

# Service Discovery
EUREKA_SERVER_URL=http://localhost:8761/eureka
EUREKA_INSTANCE_HOSTNAME=localhost

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MESSAGES_PER_SECOND=1000
RATE_LIMIT_BURST_SIZE=2000

# Circuit Breaker Configuration
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=60000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=30000

# Batch Processing Configuration
BATCH_PROCESSING_ENABLED=true
BATCH_SIZE=100
BATCH_TIMEOUT_MS=5000
MAX_CONCURRENT_BATCHES=10

# Message Validation Configuration
MESSAGE_VALIDATION_ENABLED=true
SCHEMA_VALIDATION_ENABLED=true
CONTENT_VALIDATION_ENABLED=true

# Performance Configuration
CONNECTION_POOL_SIZE=20
CONNECTION_TIMEOUT_MS=30000
REQUEST_TIMEOUT_MS=30000
METADATA_MAX_AGE_MS=300000

# Disaster Recovery Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=30

# JVM Configuration
JAVA_OPTS=-Xmx2g -Xms1g -XX:+UseG1GC -XX:MaxGCPauseMillis=200